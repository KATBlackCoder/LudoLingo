---
globs: package.json,*.json,*.ts,*.vue,*.rs
alwaysApply: false
---
# Gestionnaire de Paquets : PNPM Uniquement

## R√®gle Absolue

**TOUS les projets LudoLingo utilisent UNIQUEMENT `pnpm` comme gestionnaire de paquets.**

### Interdictions Totales
- ‚ùå **Jamais** utiliser `npm`
- ‚ùå **Jamais** utiliser `yarn`
- ‚ùå **Jamais** utiliser `bun`
- ‚ùå **Jamais** utiliser d'autres gestionnaires

### Commandes PNPM Obligatoires

#### Installation de D√©pendances
```bash
# Installation
pnpm install
pnpm add <package>
pnpm add -D <package>  # dev dependency

# Suppression
pnpm remove <package>
pnpm uninstall <package>
```

#### Scripts et Ex√©cution
```bash
# Scripts du projet
pnpm run dev
pnpm run build
pnpm run test

# Ex√©cution one-off
pnpm dlx <package>  # Jamais npx
pnpm exec <command>
```

#### Gestion des Workspaces
```bash
# Pour les monorepos (si applicable)
pnpm install
pnpm add <package> -w  # workspace root
pnpm add <package> --filter <workspace>
```

### Avantages de PNPM

#### Performance
- ‚úÖ **Installation plus rapide** : Liens physiques, pas de duplication
- ‚úÖ **Espace disque optimis√©** : Une seule copie des d√©pendances
- ‚úÖ **R√©solution d√©terministe** : `pnpm-lock.yaml` strict

#### S√©curit√©
- ‚úÖ **Protection contre attaques** : Isolation des d√©pendances
- ‚úÖ **Audit automatique** : `pnpm audit`
- ‚úÖ **Lockfile s√©curis√©** : Empreintes SHA256

#### Fonctionnalit√©s
- ‚úÖ **Workspaces natifs** : Support monorepo int√©gr√©
- ‚úÖ **Patchs locaux** : `pnpm patch`
- ‚úÖ **Overrides** : Gestion fine des versions

### Configuration Requise

#### .npmrc (recommand√©)
```ini
# Forcer l'utilisation de pnpm
engine-strict=true
node-linker=isolated
```

#### package.json
```json
{
  "engines": {
    "node": ">=18.0.0",
    "pnpm": ">=8.0.0"
  },
  "packageManager": "pnpm@8.15.0"
}
```

### Migration depuis NPM/Yarn

#### Suppression des anciens lockfiles
```bash
# Supprimer les anciens fichiers
rm package-lock.json yarn.lock
rm -rf node_modules

# R√©installer avec pnpm
pnpm install
```

#### Commandes √©quivalentes
| NPM/Yarn | PNPM |
|----------|------|
| `npm install` | `pnpm install` |
| `npm install <pkg>` | `pnpm add <pkg>` |
| `npm uninstall <pkg>` | `pnpm remove <pkg>` |
| `npm run <script>` | `pnpm run <script>` |
| `npx <cmd>` | `pnpm dlx <cmd>` |

### V√©rifications Obligatoires

- [ ] **Pas de `package-lock.json`** dans le repo
- [ ] **Pas de `yarn.lock`** dans le repo
- [ ] **Uniquement `pnpm-lock.yaml`** pr√©sent
- [ ] **Scripts utilisent `pnpm`** dans `package.json`
- [ ] **CI/CD utilise `pnpm`** exclusivement

### Cons√©quences du Non-Respect

**Projet consid√©r√© non-conforme si :**
- ‚ùå Utilisation de `npm` ou `yarn` d√©tect√©e
- ‚ùå Lockfiles d'autres gestionnaires pr√©sents
- ‚ùå Scripts utilisant `npx` au lieu de `pnpm dlx`

### Support et Ressources

- **Documentation officielle** : https://pnpm.io/
- **Migration guide** : https://pnpm.io/cli/migrate
- **Performance comparison** : https://pnpm.io/benchmarks

**PNPM = Standard unique pour tous les projets LudoLingo !** üöÄ